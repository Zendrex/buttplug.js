---
title: Reference
description: Query methods, lifecycle, and stop reasons
---

## Query Methods

### `list()`

```ts
list(): PatternInfo[]
```

Returns a snapshot of all active patterns.

<auto-type-table path="src/patterns/types.ts" name="PatternInfo" />

### `listPresets()`

```ts
listPresets(): PresetInfo[]
```

Returns metadata for all built-in presets.

<auto-type-table path="src/patterns/types.ts" name="PresetInfo" />

## Lifecycle

### `dispose()`

```ts
dispose(): void
```

Stops all patterns, unsubscribes from client events, and marks the engine as disposed. Subsequent `play()` calls will throw. Idempotent.

```ts
engine.dispose();
```

## Stop Reasons

The `onStop` callback receives one of these reasons:

<TypeTable type={{
  manual: { description: 'stop(), stopAll(), or dispose() called' },
  complete: { description: 'Pattern finished all loops' },
  timeout: { description: 'Safety timeout triggered' },
  error: { description: 'Device or protocol error' },
  disconnect: { description: 'Client disconnected' },
  deviceRemoved: { description: 'Device was removed' },
}} />
